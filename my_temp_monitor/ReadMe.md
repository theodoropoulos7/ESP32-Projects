# ESP32-S3 Temperature Web Server (ESP-IDF)

This project runs on an **ESP32-S3-DevKitC-1-N8R8** development board and implements a simple **Wi-Fi-connected HTTP server** that serves a fake temperature value. You can later replace the mock temperature function with real sensor data (e.g., from a DHT22 or DS18B20).

---

## 🔧 Features

- Connects to a Wi-Fi network in **station mode**
- Sets up an HTTP server on port 80
- Returns a fake temperature reading on the `/` route
- Logs the assigned IP address to serial output
- Automatically reconnects if Wi-Fi drops
---

## 📁 Project Structure
```
my_temp_monitor/ 
├── main/ 
│ └── main.c 
├── CMakeLists.txt 
└── README.md
```
---

## 🔍 Function Breakdown

Here’s a detailed explanation of the important functions used in the project:

---

### ✅ `wifi_init_sta()`

This function sets up the **Wi-Fi Station Mode** and connects to a router using the credentials defined in `WIFI_SSID` and `WIFI_PASS`.

**Key tasks it performs:**
- Initializes the **network stack** (`esp_netif_init`)
- Creates default event loop (`esp_event_loop_create_default`)
- Initializes the **Wi-Fi driver**
- Registers event handlers for:
  - Wi-Fi events (connected/disconnected)
  - IP events (when IP is obtained)
- Starts the Wi-Fi driver and attempts to connect

**Main APIs used:**
```c
esp_netif_init();
esp_event_loop_create_default();
esp_wifi_init();
esp_wifi_set_mode();
esp_wifi_set_config();
esp_wifi_start();
```

### ✅ wifi_event_handler()
This is the callback function registered to handle Wi-Fi and IP events.

Handles:

WIFI_EVENT_STA_START: Called when Wi-Fi driver is started → tries to connect
WIFI_EVENT_STA_DISCONNECTED: Reconnects if disconnected
IP_EVENT_STA_GOT_IP: Called when the device gets an IP address from the router
Prints the IP address to the monitor using:

```c
ESP_LOGI(TAG, "Got IP: " IPSTR, IP2STR(&event->ip_info.ip));
```
This lets you know the ESP is now accessible in the local network.

### ✅ start_webserver()
This sets up a basic HTTP server using ESP-IDF’s built-in lightweight web server (esp_http_server).

Steps:

Initializes server config with defaults
Starts the web server
Registers a URI handler (temp_uri) to respond to GET requests on /
Main APIs used:

```c
httpd_start();
httpd_register_uri_handler();
```

### ✅ temp_get_handler()

This is the function that gets called when someone accesses the ESP’s IP in a browser.

Returns a mock temperature string:

```c
"Temperature: 24.56 C"
```
Data is generated by get_mock_temperature(), which simulates a real sensor reading.

API used:
```c
httpd_resp_send();  // sends the response to the browser/client
```

### ✅ get_mock_temperature()
Just a simulated function for now — generates random temperature between 20.0 and 30.0°C using ESP’s hardware RNG.

```c
return 20.0 + (esp_random() % 1000) / 100.0;
```

### 📚 Key ESP-IDF Libraries Used
Library	Description
`esp_wifi.h`	Wi-Fi configuration and connection
`esp_netif.h`	Network interface abstraction layer
`esp_event.h`	Register and manage system event callbacks
`esp_log.h`	Logging macros (ESP_LOGI, ESP_LOGE, etc.)
`esp_http_server.h`	Lightweight embedded HTTP server
`freertos/FreeRTOS.h`	RTOS primitives and task management
`nvs_flash.h`	Initializes non-volatile storage used by Wi-Fi

## 🚀 Getting Started

### ✅ Prerequisites

- ESP32-S3-DevKitC-1-N8R8
- ESP-IDF v5.4 installed and working (`idf.py`, etc.)
- Access to Wi-Fi network

### 📥 Setup

1. Clone this project or copy the files.
2. Replace the `WIFI_SSID` and `WIFI_PASS` macros in `main.c` with your actual Wi-Fi credentials.

```c
#define WIFI_SSID "Your_SSID"
#define WIFI_PASS "Your_PASSWORD"
```

* Build, flash and monitor using `idf.py` -- Consult `notes.md` if necessary

### Access the Web Server

* Look at the logs when using idf monitor (Example IP)
```bash
I (5328) TEMP_MONITOR: Got IP: 192.168.2.123
```
* Visit that IP in your browser
* You should see the temperature reading (random value)
```
Temperature: 25.73 C
```

## 🔄 Future Improvements

* Replace mock temperature with real sensor via GPIO
* Serve HTML UI instead of plain text
* Add Wi-Fi configuration via web page (captive portal)
* Add MQTT client for cloud integration (e.g. Home Assistant, AWS)